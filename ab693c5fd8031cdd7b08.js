(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{368:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"works",attrs:{id:"works"}},[i("div",{staticClass:"works__container container"},[t._m(0),1==t.editWork?i("section",{staticClass:"work-edit edit-block__container",attrs:{id:"work-edit"}},[i("div",{staticClass:"edit-block edit-block--work"},[t._v(" Редактирование работы")]),i("form",{staticClass:"edit__container edit__container--work",class:{blocked:t.loading},on:{submit:function(e){return e.preventDefault(),t.newExengeAddWork(t.newWork)}}},[i("div",{staticClass:"load-file__block"},[i("div",{staticClass:"load-file__container"},[i("label",{staticClass:"load-file__form",class:{filled:t.renderedPhoto.length},style:t.renderedBackground},[i("div",{staticClass:"load-file__title"},[t._v("Перетащите или загрузите для загрузки изображения")]),i("input",{staticClass:"reviews__form-file-input",attrs:{type:"file"},on:{change:t.handleFile}}),i("div",{staticClass:"button-click add-button"},[t._v("Загрузить")]),i("div",{staticClass:"input-tooltip",class:{"input-tooltip--showed":t.validation.hasError("renderedPhoto")}},[i("div",{staticClass:"erorr___container"},[i("div",{staticClass:"erorr___container__text"},[t._v(t._s(t.validation.firstError("renderedPhoto"))+"   ")])])])])])]),i("div",{staticClass:"form-add-work__block"},[i("div",{staticClass:"form-add-work__container"},[i("div",{staticClass:"form-add-work__list"},[i("div",{staticClass:"form-add__item"},[i("label",{staticClass:"form-label",attrs:{for:"label1"}},[t._v("Название")]),i("div",{staticClass:"input-block__form-add"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newWork.title,expression:"newWork.title"}],staticClass:"input-block input--form-add",attrs:{placeholder:"",id:"label1"},domProps:{value:t.newWork.title},on:{input:function(e){e.target.composing||t.$set(t.newWork,"title",e.target.value)}}}),i("div",{staticClass:"input-tooltip",class:{"input-tooltip--showed":t.validation.hasError("newWork.title")}},[i("div",{staticClass:"erorr___container"},[i("div",{staticClass:"erorr___container__text"},[t._v(t._s(t.validation.firstError("newWork.title"))+"                    ")])])])])]),i("div",{staticClass:"form-add__item"},[i("label",{staticClass:"form-label",attrs:{for:"label2"}},[t._v("Ссылка")]),i("div",{staticClass:"input-block__form-add"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newWork.link,expression:"newWork.link"}],staticClass:"input-block input--form-add",attrs:{placeholder:"",id:"label2"},domProps:{value:t.newWork.link},on:{input:function(e){e.target.composing||t.$set(t.newWork,"link",e.target.value)}}}),i("div",{staticClass:"input-tooltip",class:{"input-tooltip--showed":t.validation.hasError("newWork.link")}},[i("div",{staticClass:"erorr___container"},[i("div",{staticClass:"erorr___container__text"},[t._v(t._s(t.validation.firstError("newWork.link"))+"                                        ")])])])])]),i("div",{staticClass:"form-add__item"},[i("label",{staticClass:"form-label",attrs:{for:"label3"}},[t._v("Описание")]),i("div",{staticClass:"input-block__form-add"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newWork.description,expression:"newWork.description"}],staticClass:"textarea-block textarea--form-add",domProps:{value:t.newWork.description},on:{input:function(e){e.target.composing||t.$set(t.newWork,"description",e.target.value)}}}),i("div",{staticClass:"input-tooltip",class:{"input-tooltip--showed":t.validation.hasError("newWork.description")}},[i("div",{staticClass:"erorr___container"},[i("div",{staticClass:"erorr___container__text"},[t._v(t._s(t.validation.firstError("newWork.description"))+"                      ")])])])])]),i("div",{staticClass:"form-add__item"},[i("label",{staticClass:"form-label",attrs:{for:"label4"}},[t._v("Добавление тэга")]),i("div",{staticClass:"input-block__form-add"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newWork.techs,expression:"newWork.techs"}],staticClass:"input-block input--form-add",attrs:{placeholder:"",id:"label4"},domProps:{value:t.newWork.techs},on:{input:function(e){e.target.composing||t.$set(t.newWork,"techs",e.target.value)}}}),i("div",{staticClass:"input-tooltip",class:{"input-tooltip--showed":t.validation.hasError("newWork.techs")}},[i("div",{staticClass:"erorr___container"},[i("div",{staticClass:"erorr___container__text"},[t._v(t._s(t.validation.firstError("newWork.techs"))+"                    ")])])])]),i("div",{staticClass:"tags__contener"},[i("div",{staticClass:"tags__list"},t._l(t.tags,function(e,r){return i("div",{staticClass:"tags__iteam"},[i("div",{staticClass:"tags__iteam__title"},[t._v(t._s(e))]),i("button",{staticClass:"tags__iteam__icon tags--cross",on:{click:function(e){return t.delTag(r)}}})])}),0)])]),i("div",{staticClass:"form-add__button"},[i("button",{staticClass:"button-no-click form-add--button-no-click",attrs:{type:"reset"},on:{click:t.ResetForm}},[t._v("Отмена")]),i("button",{staticClass:"button-click form-add--button-click add-button",attrs:{type:"submit",disabled:t.loading}},[t._v("Сохранить      ")])])])])])])]):t._e(),i("section",{staticClass:"works-list",attrs:{id:"works-list"}},[i("div",{staticClass:"works-list__container"},[0==t.editWork?i("div",{staticClass:"work-iteam work-iteam--button"},[i("div",{staticClass:"block-iteam__container"},[i("div",{staticClass:"block-add-button__block"},[i("div",{staticClass:"block-add-button__container"},[i("button",{staticClass:"block-add-button",on:{click:function(e){t.editWork=!0}}},[t._v("+")]),i("div",{staticClass:"block-add-title"},[t._v("Добавить работу       ")])])])])]):t._e(),t._l(t.works,function(e){return i("div",{key:e.id,staticClass:"work-iteam"},[i("work-iteam",{attrs:{work:e},on:{editeExistedWork:t.editeExistedWork}})],1)})],2)])])])};r._withStripped=!0;var o=i(65),s=i(66),n=i.n(s);function a(t,e,i,r,o,s,n){try{var a=t[s](n),l=a.value}catch(t){return void i(t)}a.done?e(l):Promise.resolve(l).then(r,o)}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?Object(arguments[e]):{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),r.forEach(function(e){c(t,e,i[e])})}return t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var d=n.a.Validator,u={mixins:[n.a.mixin],data:function(){return{tags:[],loading:!1,editWork:!1,renderedPhoto:"",work:{photo:"",techs:"",title:"",link:"",description:""},newWork:l({},this.work)}},validators:{"newWork.title":function(t){return d.value(t).required("Введите Название")},"newWork.link":function(t){return d.value(t).required("Введите ссылку")},"newWork.description":function(t){return d.value(t).required("Введите Описание")},"newWork.techs":function(t){return d.value(t).required("Введите Тэги")},renderedPhoto:function(t){return d.value(t).required("Введите фото")}},components:{workIteam:function(){return i.e(10).then(i.bind(null,373))}},computed:l({},Object(o.c)("works",{works:function(t){return t.works}}),Object(o.c)("user",{userID:function(t){return t.user.id}}),{renderedBackground:function(){return this.renderedPhoto?"background-image: url(".concat(this.renderedPhoto,");"):""}}),methods:l({},Object(o.b)("works",["newAddWork","fetchWork","updateWork"]),{ResetForm:function(){this.renderedPhoto="",this.tags=[],this.editWork=!1,this.work={},this.work.title="",this.work.link="",this.work.description="",this.work.techs="",this.newWork=l({},this.work),this.validation.reset()},handleFile:function(t){var e=t.target.files[0];this.newWork.photo=e,this.renderImageFile(e)},delTag:function(t){this.tags.splice(t,1),this.newWork.techs=this.tags.join(", ")},newExengeAddWork:function(){var t,e=(t=regeneratorRuntime.mark(function t(e){var i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$validate();case 2:if(!t.sent){t.next=32;break}if(this.loading=!0,t.prev=4,!Object.keys(this.newWork).some(function(t){return i.newWork[t]!==i.work[t]})){t.next=15;break}if(!e.id){t.next=12;break}return t.next=10,this.updateWork(e);case 10:t.next=14;break;case 12:return t.next=14,this.newAddWork(e);case 14:this.editWork=!1;case 15:t.next=19;break;case 17:t.prev=17,t.t0=t.catch(4);case 19:return t.prev=19,this.loading=!1,this.renderedPhoto="",this.tags=[],this.editWork=!1,this.work={},this.work.title="",this.work.link="",this.work.description="",this.work.techs="",this.newWork=l({},this.work),this.validation.reset(),t.finish(19);case 32:case"end":return t.stop()}},t,this,[[4,17,19,32]])}),function(){var e=this,i=arguments;return new Promise(function(r,o){var s=t.apply(e,i);function n(t){a(s,r,o,n,l,"next",t)}function l(t){a(s,r,o,n,l,"throw",t)}n(void 0)})});return function(t){return e.apply(this,arguments)}}(),renderImageFile:function(t){var e=this,i=new FileReader;try{i.readAsDataURL(t),i.onloadend=function(){e.renderedPhoto=i.result}}catch(t){throw new Errow("Ошибка при чтении файла")}},editeExistedWork:function(t){this.work=t,this.newWork=l({},this.work),this.editWork=!0,this.work.photo&&(this.renderedPhoto="https://webdev-api.loftschool.com/"+this.newWork.photo)}}),created:function(){this.fetchWork(this.userID),this.newWork=l({},this.work),this.work.photo&&(this.renderedPhoto="https://webdev-api.loftschool.com/"+this.newWork.photo),this.newWork.techs.length>0&&(this.tags=this.newWork.split(", "))},watch:{work:function(){this.newWork=l({},this.work),this.newWork.photo&&(this.renderedPhoto="https://webdev-api.loftschool.com/"+this.newWork.photo)},"newWork.techs":function(){this.newWork.techs&&(this.tags=this.newWork.techs.split(", "))}}},k=i(96),h=Object(k.a)(u,r,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title__container"},[e("h2",{staticClass:"h2__title"},[this._v("Блок «Работы»")])])}],!1,null,null,null);h.options.__file="src/admin/components/pages/works/works.vue";e.default=h.exports}}]);